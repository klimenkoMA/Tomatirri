<!DOCTYPE html>
<html xmlns:th="http://www.w3.org/1999/xhtml" lang="ru">


<div th:replace="fragments/headers/head :: head"></div>
<script type="text/javascript" th:src="@{/js/cards/changeMainImage.js}"></script>


<body>
<div class="wrapper d-flex flex-column
justify-content-center p-0 m-0"
     style="align-self: center;">

    <div th:replace="fragments/headers/headermain :: headermain"></div>

    <main class="main d-flex flex-column p-0 m-0"
          style="
          align-self: center;
          max-width: 90%;">

        <div class="flex-column"
             style="padding: 3vh;
             min-height: 70vh;
             min-width: 90vw;">


            <div th:each="element : ${cardList}"
                 class="col">

                <div style="width: 90%">
                    <h2 class="text-center"
                        style="color: orangered;
                        margin-bottom: 1rem;">
                        <strong th:text="${element.tomatoesName}"></strong>
                    </h2>
                </div>

                <hr class="border-top border-1 border-success my-auto"
                    style="min-width: border-box;
                    background-color: #467a53;
                    max-height: 0.1vh">


                <div class="d-flex flex-row mb-2">

                    <div th:replace="fragments/cards/cardstats :: cardstats"></div>

                    <div th:replace="fragments/cards/cardspecialities :: cardspecialities"></div>

                </div>

                <div th:replace="fragments/cards/cardphotoes :: cardphotoes"></div>

                <hr class="border-top border-1 border-success my-3"
                    style="min-width: 55vw;
                    margin-top: 1vh;
                    background-color: #467a53;
                    max-height: 0.1vh">

            </div>

        </div>

    </main>
    <footer>
        <div th:replace="fragments/footermain :: footermain"></div>
    </footer>
</div>
<div th:replace="fragments/cards/modalImage :: modalImage"></div>
</body>
</html>

<script>
    // Новая функция для подготовки модального окна
    function prepareGalleryModal(imgElement) {
        const index = imgElement.getAttribute('data-index');
        document.getElementById('galleryModal').setAttribute('data-start-index', index);
        document.getElementById('galleryBtn').click();
    }

    // Модифицированный скрипт инициализации карусели
    document.addEventListener('DOMContentLoaded', function () {
        var galleryModal = document.getElementById('galleryModal');
        if (galleryModal) {
            galleryModal.addEventListener('shown.bs.modal', function () {
                var startIndex = parseInt(this.getAttribute('data-start-index')) || 0;
                var carousel = new bootstrap.Carousel(document.getElementById('galleryCarousel'), {});
                carousel.to(startIndex); // Переходим к нужному слайду
            });
        }
    });
</script>
